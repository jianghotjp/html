(function(global,factory){if(typeof require==="function"&&typeof module==="object"&&module&&typeof exports==="object"&&exports){factory(require("iSlider"))}else{if(typeof define==="function"&&define["amd"]){define(["iSlider"],function(iSlider){factory(iSlider)})}else{factory(global["iSlider"])}}})(window?window:this,function(iSlider){iSlider&&iSlider.regPlugin("BIZone",function(opts){var HANDLE=this;var zoneSize=parseZone(opts.size||0);var device=this.deviceEvents;var outer=HANDLE.outer;var range=initRange();function parseZone(sizes){if(typeof sizes==="number"){if(sizes<0){sizes=0}return[sizes,sizes,sizes,sizes]}else{if(sizes instanceof Array){switch(sizes.length){case 4:return sizes;case 3:return[sizes[0],sizes[1],sizes[2],sizes[1]];case 2:return[sizes[0],sizes[1],sizes[0],sizes[1]];case 1:return[sizes[0],sizes[0],sizes[0],sizes[0]]}}}return[0,0,0,0]}function initRange(){var docEl=outer.ownerDocument.documentElement;var box={top:0,left:0};if(typeof outer.getBoundingClientRect!=="undefined"){box=outer.getBoundingClientRect()}var top=box.top+(window.pageYOffset||docEl.scrollTop)-(docEl.clientTop||0);var left=box.left+(window.pageXOffset||docEl.scrollLeft)-(docEl.clientLeft||0);return[top,left+outer.offsetWidth,top+outer.offsetHeight,left]}if(zoneSize.filter(function(i){return i>0}).length>0){HANDLE.on("slide",function(evt){var finger=device.hasTouch?evt.targetTouches[0]:evt;var pos=[finger.pageY,finger.pageX,finger.pageY,finger.pageX];for(var i=0;i<4;i++){if(Math.abs(pos[i]-range[i])<zoneSize[i]){this.endHandler(new Event(device.endEvt));break}}})}})});
(function(global){function noop(){}function inArray(o,arr){return arr.indexOf(o)>-1}function isArray(o){return Object.prototype.toString.call(o)==="[object Array]"}function isObject(o){return Object.prototype.toString.call(o)==="[object Object]"}function hasClass(el,cls){return el.className.match(new RegExp("(\\s|^)("+cls+")(\\s|$)"))}function addClass(el,cls){if(!hasClass(el,cls)){el.className+=" "+cls}}function removeClass(el,cls){if(hasClass(el,cls)){el.className=el.className.replace(RegExp("(\\s|^)("+cls+")(\\s|$)"),"$3")}}function isUrl(url){if(/<\/?[^>]*>/.test(url)){return false}return/^(?:(https|http|ftp|rtsp|mms):)?(\/\/)?(\w+:{0,1}\w*@)?([^\?#:\/]+\.[a-z]+|\d+\.\d+\.\d+\.\d+)?(:[0-9]+)?((?:\.?\/)?([^\?#]*)?(\?[^#]+)?(#.+)?)?$/.test(url)}function _A(a){return Array.prototype.slice.apply(a,Array.prototype.slice.call(arguments,1))}function IU(word){return word.replace(/^[a-z]/,function(t){return t.toUpperCase()})}var iSlider=function(){var args=_A(arguments,0,3);if(!args.length){throw new Error("Parameters required!")}var opts=isObject(args.slice(-1)[0])?args.pop():{};switch(args.length){case 2:opts.data=opts.data||args[1];case 1:opts.dom=opts.dom||args[0]}if(!opts.dom){throw new Error("Container can not be empty!")}if(!opts.data||!opts.data.length){throw new Error("Data must be an array and must have more than one element!")}this._opts=opts;opts=null,args=null;this._setting();this.fire("initialize");this._renderWrapper();this._initPlugins();this._bindHandler();this.fire("initialized");this._autoPlay()};iSlider.VERSION="2.1.6";iSlider.EVENTS=["initialize","initialized","pluginInitialize","pluginInitialized","renderComplete","slide","slideStart","slideEnd","slideChange","slideChanged","slideRestore","slideRestored","loadData","reset","destroy"];iSlider.EASING=[["linear","ease","ease-in","ease-out","ease-in-out"],/cubic-bezier\(([^\d]*(\d+.?\d*)[^\,]*\,?){4}\)/];iSlider.FIX_PAGE_TAGS=["SELECT","INPUT","TEXTAREA","BUTTON","LABEL"];iSlider.NODE_TYPE={unknown:"unknown",empty:"empty",pic:"pic",dom:"dom",html:"html",node:"node",element:"element"};
iSlider.TRANSITION_END_EVENT=null;iSlider.BROWSER_PREFIX=null;(function(){var e=document.createElement("fakeElement");[["WebkitTransition","webkitTransitionEnd","webkit"],["transition","transitionend",null],["MozTransition","transitionend","moz"],["OTransition","oTransitionEnd","o"]].some(function(t){if(e.style[t[0]]!==undefined){iSlider.TRANSITION_END_EVENT=t[1];iSlider.BROWSER_PREFIX=t[2];return true}})})();iSlider.DEVICE_EVENTS=(function(){var hasTouch=!!(("ontouchstart" in global&&!/Mac OS X /.test(global.navigator.userAgent))||global.DocumentTouch&&document instanceof global.DocumentTouch);return{hasTouch:hasTouch,startEvt:hasTouch?"touchstart":"mousedown",moveEvt:hasTouch?"touchmove":"mousemove",endEvt:hasTouch?"touchend":"mouseup",cancelEvt:hasTouch?"touchcancel":"mouseout",resizeEvt:"onorientationchange" in global?"orientationchange":"resize"}})();iSlider.extend=function(){var main,extend,args=arguments;switch(args.length){case 0:return;case 1:main=iSlider.prototype;extend=args[0];break;case 2:main=args[0];extend=args[1];break}for(var property in extend){if(extend.hasOwnProperty(property)){main[property]=extend[property]}}};iSlider.plugins={};iSlider.regPlugin=function(name,plugin){iSlider.plugins[name]=iSlider.plugins[name]||plugin};iSlider.styleProp=function(prop,isDP){if(iSlider.BROWSER_PREFIX){if(!!isDP){return iSlider.BROWSER_PREFIX+IU(prop)}else{return"-"+iSlider.BROWSER_PREFIX+"-"+prop}}else{return prop}};iSlider.setStyle=function(dom,prop,value){dom.style[iSlider.styleProp(prop,1)]=value};iSlider.getStyle=function(dom,prop){return dom.style[iSlider.styleProp(prop,1)]};iSlider._animateFuncs={normal:(function(){function normal(dom,axis,scale,i,offset){iSlider.setStyle(dom,"transform","translateZ(0) translate"+axis+"("+(offset+scale*(i-1))+"px)")}normal.effect=iSlider.styleProp("transform");return normal})()};var iSliderPrototype=iSlider.prototype;iSliderPrototype.extend=iSlider.extend;iSliderPrototype._setting=function(){var self=this;self._plugins=iSlider.plugins;
self._animateFuncs=iSlider._animateFuncs;self._holding=false;self._locking=false;self._intermediateScene=null;self._transitionEndHandler=null;self._LSN={autoPlay:null,resize:null,transitionEnd:null};self.currentEl=null;self._EventHandle={};self.onMoving=false;self.onSliding=false;self.direction=null;var opts=this._opts;self.wrap=opts.dom;self.data=opts.data;self.isVertical=!!opts.isVertical;self.isOverspread=!!opts.isOverspread;self.duration=opts.duration||2000;self.initIndex=opts.initIndex>0&&opts.initIndex<=opts.data.length-1?opts.initIndex:0;self.fixPage=(function(){var fp=opts.fixPage;if(fp===false||fp===0){return false}if(isArray(fp)&&fp.length>0||typeof fp==="string"&&fp!==""){return[].concat(fp).toString()}return true})();self.fillSeam=!!opts.fillSeam;self.slideIndex=self.slideIndex||self.initIndex||0;self.axis=self.isVertical?"Y":"X";self.reverseAxis=self.axis==="Y"?"X":"Y";self.width=typeof opts.width==="number"?opts.width:self.wrap.offsetWidth;self.height=typeof opts.height==="number"?opts.height:self.wrap.offsetHeight;self.ratio=self.height/self.width;self.scale=self.isVertical?self.height:self.width;self.offset=self.offset||{X:0,Y:0};self.isTouchable=opts.isTouchable==null?true:!!opts.isTouchable;self.isLooping=opts.isLooping&&self.data.length>1?true:false;self.dampingForce=Math.max(0,Math.min(1,parseFloat(opts.dampingForce)||0));self.delay=opts.delay||0;self.isAutoplay=opts.isAutoplay&&self.data.length>1?true:false;self.animateType=opts.animateType in self._animateFuncs?opts.animateType:"normal";self._animateFunc=self._animateFuncs[self.animateType];self._animateReverse=(function(){var _=[];for(var type in self._animateFuncs){if(self._animateFuncs.hasOwnProperty(type)&&self._animateFuncs[type].reverse){_.push(type)}}return _})();if(self.isVertical&&self.animateType==="card"){self.isOverspread=true}self.log=opts.isDebug?function(){global.console.log.apply(global.console,arguments)}:noop;self._damping=(function(){return function(distance){return Math.atan(Math.abs(distance)/self.scale)*0.62*(1-self.dampingForce)*self.scale*(distance>0?1:-1)
}})();self.animateTime=opts.animateTime!=null&&opts.animateTime>-1?opts.animateTime:300;self.animateEasing=inArray(opts.animateEasing,iSlider.EASING[0])||iSlider.EASING[1].test(opts.animateEasing)?opts.animateEasing:"ease";self.deviceEvents=iSlider.DEVICE_EVENTS;self.fingerRecognitionRange=opts.fingerRecognitionRange>-1?parseInt(opts.fingerRecognitionRange):10;self.events={};iSlider.EVENTS.forEach(function(eventName){var fn=opts["on"+eventName.toLowerCase()];typeof fn==="function"&&self.on(eventName,fn,1)});self.pluginConfig=(function(){var config={};if(isArray(opts.plugins)){opts.plugins.forEach(function pluginConfigEach(plugin){if(isArray(plugin)){config[plugin[0]]=plugin.slice(1)}else{if(typeof plugin==="string"){config[plugin]=[]}}})}return config})()};iSliderPrototype._initPlugins=function(){var config=this.pluginConfig;var plugins=this._plugins;for(var i in config){if(config.hasOwnProperty(i)&&plugins.hasOwnProperty(i)){this.log("[INIT PLUGIN]:",i,plugins[i]);plugins[i]&&typeof plugins[i]==="function"&&typeof plugins[i].apply&&plugins[i].apply(this,config[i])}}this.fire("pluginInitialized")};iSliderPrototype._itemType=function(item){if(!isNaN(item)){item=this.data[item]}if(item.hasOwnProperty("type")){return item.type}var content=item.content;var _NT=iSlider.NODE_TYPE;var type;if(content==null){type=_NT.empty}else{if(Boolean(content.nodeName)&&Boolean(content.nodeType)){type=_NT.node}else{if(typeof content==="string"){if(isUrl(content)){type=_NT.pic}else{type=_NT.html}}else{type=_NT.unknown}}}item.type=type;return type};iSliderPrototype._renderItem=function(el,dataIndex){var item,self=this,len=this.data.length;var insertImg=function renderItemInsertImg(){var simg=' src="'+item.content+'"';if(item.height/item.width>self.ratio){simg+=' height="100%"'}else{simg+=' width="100%"'}if(self.isOverspread){el.style.cssText+="background-image:url("+item.content+");background-repeat:no-repeat;background-position:50% 50%;background-size:cover";simg+=' style="display:block;opacity:0;height:100%;width:100%;"'
}el.innerHTML="<img"+simg+" />"};el.innerHTML="";el.style.background="";if(!this.isLooping&&this.data[dataIndex]==null){return}else{dataIndex=(len+dataIndex)%len;item=this.data[dataIndex]}var type=this._itemType(item);var _NT=iSlider.NODE_TYPE;this.log("[RENDER]:",type,dataIndex,item);el.className="islider-"+type;switch(type){case _NT.pic:if(item.load===2){insertImg()}else{var currentImg=new Image();currentImg.src=item.content;currentImg.onload=function(){item.height=currentImg.height;item.width=currentImg.width;insertImg();item.load=2}}break;case _NT.dom:case _NT.html:el.innerHTML=item.content;break;case _NT.node:case _NT.element:if(item.content.nodeType===11){var entity=document.createElement("div");entity.appendChild(item.content);item.content=entity}el.appendChild(item.content);break;default:break}};iSliderPrototype._renderIntermediateScene=function(){if(this._intermediateScene!=null){this._renderItem.apply(this,this._intermediateScene);this._intermediateScene=null}};iSliderPrototype._changedStyles=function(){var slideStyles=["islider-prev","islider-active","islider-next"];this.els.forEach(function changeStypeEach(el,index){removeClass(el,slideStyles.join("|"));addClass(el,slideStyles[index]);this.fillSeam&&this.originScale(el)}.bind(this))};iSliderPrototype._renderWrapper=function(){var outer;if(this.outer){outer=this.outer;outer.innerHTML=""}else{outer=document.createElement("ul")}outer.className="islider-outer";this.els=[];for(var i=0;i<3;i++){var li=document.createElement("li");this.els.push(li);this._animateFunc(li,this.axis,this.scale,i,0);if(!this.fixPage){li.style.overflow="auto"}this.isVertical&&(this.animateType==="rotate"||this.animateType==="flip")?this._renderItem(li,1-i+this.slideIndex):this._renderItem(li,i-1+this.slideIndex);outer.appendChild(li)}this._changedStyles();if(this.fillSeam){this.els.forEach(function(el,i){addClass(el,"islider-sliding"+(i===1?"-focus":""))})}global.setTimeout(function(){this._preloadImg(this.slideIndex)}.bind(this),200);
if(!this.outer){this.outer=outer;this.wrap.appendChild(outer)}this.currentEl=this.els[1];this.fire("renderComplete",this.slideIndex,this.currentEl,this)};iSliderPrototype._preloadImg=function(dataIndex){if(this.data.length>3){var data=this.data;var len=data.length;var self=this;var loadImg=function preloadImgLoadingProcess(index){var item=data[index];if(self._itemType(item)==="pic"&&!item.load){var preloadImg=new Image();preloadImg.src=item.content;preloadImg.onload=function(){item.width=preloadImg.width;item.height=preloadImg.height;item.load=2};item.load=1}};loadImg((dataIndex+2)%len);loadImg((dataIndex-2+len)%len)}};iSliderPrototype._watchTransitionEnd=function(squeezeTime,eventType){this._unWatchTransitionEnd();var cb=function(){this._unWatchTransitionEnd();if(eventType==="slideChanged"){this._changedStyles()}this.fire.call(this,eventType,this.slideIndex,this.currentEl,this);this._renderIntermediateScene();this.play();this.onSliding=false;this.direction=null}.bind(this);if(iSlider.TRANSITION_END_EVENT){this.currentEl.addEventListener(iSlider.TRANSITION_END_EVENT,cb);this._transitionEndHandler={el:this.currentEl,handler:cb}}this._LSN.transitionEnd=global.setTimeout(cb,squeezeTime)};iSliderPrototype._unWatchTransitionEnd=function(){if(this._LSN.transitionEnd){global.clearTimeout(this._LSN.transitionEnd)}if(this._transitionEndHandler!==null){this._transitionEndHandler.el.removeEventListener(iSlider.TRANSITION_END_EVENT,this._transitionEndHandler.handler);this._transitionEndHandler=null}};iSliderPrototype._bindHandler=function(){var outer=this.outer;var device=this.deviceEvents;if(this.isTouchable){if(!device.hasTouch){outer.style.cursor="pointer";outer.ondragstart=function(evt){if(evt){return false}return true}}outer.addEventListener(device.startEvt,this);outer.addEventListener(device.moveEvt,this);outer.addEventListener(device.endEvt,this);!device.hasTouch&&outer.addEventListener("mouseout",this)}global.addEventListener(device.resizeEvt,this);global.addEventListener("focus",this,false);
global.addEventListener("blur",this,false)};iSliderPrototype.handleEvent=function(evt){var device=this.deviceEvents;switch(evt.type){case"mousedown":if(evt.button!==0){break}case"touchstart":this.startHandler(evt);break;case device.moveEvt:this.moveHandler(evt);break;case device.endEvt:case device.cancelEvt:this.endHandler(evt);break;case device.resizeEvt:this.resizeHandler();break;case"focus":this.play();break;case"blur":this.pause();break}};iSliderPrototype.startHandler=function(evt){if(this.fixPage&&iSlider.FIX_PAGE_TAGS.indexOf(evt.target.tagName.toUpperCase())<0&&!this._isItself(evt.target)){evt.preventDefault()}if(this._holding||this._locking){return}var device=this.deviceEvents;this.onMoving=true;this.pause();this.log("[EVENT]: start");this.fire("slideStart",evt,this);this.startTime=new Date().getTime();this.startX=device.hasTouch?evt.targetTouches[0].pageX:evt.pageX;this.startY=device.hasTouch?evt.targetTouches[0].pageY:evt.pageY};iSliderPrototype.moveHandler=function(evt){if(!this.onMoving){return}this.log("[EVENT]: moving");var device=this.deviceEvents;var len=this.data.length;var axis=this.axis;var reverseAxis=this.reverseAxis;var offset={};if(evt.hasOwnProperty("offsetRatio")){offset[axis]=evt.offsetRatio*this.scale;offset[reverseAxis]=0}else{offset.X=device.hasTouch?(evt.targetTouches[0].pageX-this.startX):(evt.pageX-this.startX);offset.Y=device.hasTouch?(evt.targetTouches[0].pageY-this.startY):(evt.pageY-this.startY)}this.offset=offset;evt.offsetRatio=offset[axis]/this.scale;if(Math.abs(offset[axis])-Math.abs(offset[reverseAxis])>10){evt.preventDefault();this._unWatchTransitionEnd();if(!this.isLooping){if(offset[axis]>0&&this.slideIndex===0||offset[axis]<0&&this.slideIndex===len-1){offset[axis]=this._damping(offset[axis])}}this.els.forEach(function(item,i){item.style.visibility="visible";iSlider.setStyle(item,"transition","none");this._animateFunc(item,axis,this.scale,i,offset[axis],offset[axis]);this.fillSeam&&this.seamScale(item)}.bind(this));this.fire("slide",evt,this)
}};iSliderPrototype.endHandler=function(evt){if(!this.onMoving){return}this.log("[EVENT]: end");this.onMoving=false;var offset=this.offset;var axis=this.axis;var boundary=this.scale/2;var endTime=new Date().getTime();var FRR=this.fingerRecognitionRange;boundary=endTime-this.startTime>300?boundary:14;var absOffset=Math.abs(offset[axis]);var absReverseOffset=Math.abs(offset[this.reverseAxis]);function dispatchLink(el){if(el!=null){if(el.tagName==="A"){if(el.href){if(el.getAttribute("target")==="_blank"){global.open(el.href)}else{global.location.href=el.href}evt.preventDefault();return false}}else{if(el.tagName==="LI"&&el.className.search(/^islider\-/)>-1){return false}else{dispatchLink(el.parentNode)}}}}this.fire("slideEnd",evt,this);if(offset[axis]>=boundary&&absReverseOffset<absOffset){this.slideTo(this.slideIndex-1)}else{if(offset[axis]<-boundary&&absReverseOffset<absOffset){this.slideTo(this.slideIndex+1)}else{if(Math.abs(this.offset[axis])>=FRR){this.slideTo(this.slideIndex)}}}if(Math.abs(this.offset[axis])<FRR&&this.fixPage&&evt.target){dispatchLink(evt.target)}this.offset.X=this.offset.Y=0};iSliderPrototype.resizeHandler=function(){var _L=this._LSN.resize;var startTime=+new Date,_W,_H;if(this.deviceEvents.hasTouch){_L&&global.clearInterval(_L);_L=global.setInterval(function(){if(this.height!==this.wrap.offsetHeight||this.width!==this.wrap.offsetWidth){_L&&global.clearInterval(_L);_L=global.setInterval(function(){if(_W===this.wrap.offsetWidth&&_H===this.wrap.offsetHeight){_L&&global.clearInterval(_L);this.reset();this.log("[EVENT]: resize")}else{_W=this.wrap.offsetWidth,_H=this.wrap.offsetHeight}}.bind(this),12)}else{if(+new Date-startTime>=1000){_L&&global.clearInterval(_L)}}}.bind(this),12)}else{_L&&global.clearTimeout(_L);_L=global.setTimeout(function(){if(this.height!==this.wrap.offsetHeight||this.width!==this.wrap.offsetWidth){_L&&global.clearInterval(_L);this.reset();this.log("[EVENT]: resize")}}.bind(this),200)}};iSliderPrototype.slideTo=function(dataIndex,opts){if(this.isAutoplay){this.pause()
}if(this._locking){return}this.unhold();this.onSliding=true;var animateTime=this.animateTime;var animateType=this.animateType;var animateFunc=this._animateFunc;var data=this.data;var els=this.els;var axis=this.axis;var idx=dataIndex;var n=dataIndex-this.slideIndex;var offset=this.offset;var eventType;var squeezeTime=0;if(typeof opts==="object"){if(opts.animateTime>-1){animateTime=opts.animateTime}if(typeof opts.animateType==="string"&&opts.animateType in this._animateFuncs){animateType=opts.animateType;animateFunc=this._animateFuncs[animateType]}}if(offset[axis]!==0){squeezeTime=Math.abs(offset[axis])/this.scale*animateTime}if(Math.abs(n)>1){this._renderItem(n>0?this.els[2]:this.els[0],idx)}this._preloadImg(idx);if(data[idx]){this.slideIndex=idx}else{if(this.isLooping){this.slideIndex=n>0?0:data.length-1}else{n=0}}this.log("[SLIDE TO]: "+this.slideIndex);var headEl,tailEl,direction;if(n===0){eventType="slideRestore"}else{if((this.isVertical&&(inArray(animateType,this._animateReverse)))^(n>0)){els.push(els.shift());headEl=els[2];tailEl=els[0];direction=1}else{els.unshift(els.pop());headEl=els[0];tailEl=els[2];direction=-1}this.currentEl=els[1];if(Math.abs(n)===1){this._renderIntermediateScene();this._renderItem(headEl,idx+n)}else{if(Math.abs(n)>1){this._renderItem(headEl,idx+direction);this._intermediateScene=[tailEl,idx-direction]}}iSlider.setStyle(headEl,"transition","none");squeezeTime=animateTime-squeezeTime;eventType="slideChange";if(this.fillSeam){els.forEach(function(el){removeClass(el,"islider-sliding|islider-sliding-focus")});addClass(this.currentEl,"islider-sliding-focus");addClass(headEl,"islider-sliding")}this.direction=direction}for(var i=0;i<3;i++){if(els[i]!==headEl){iSlider.setStyle(els[i],"transition",(animateFunc.effect||"all")+" "+squeezeTime+"ms "+this.animateEasing)}animateFunc.call(this,els[i],axis,this.scale,i,0,direction);this.fillSeam&&this.seamScale(els[i])}this._watchTransitionEnd(squeezeTime,eventType+"d");this.fire(eventType,this.slideIndex,this.currentEl,this)
};iSliderPrototype.slideNext=function(){this.slideTo.apply(this,[this.slideIndex+1].concat(_A(arguments)))};iSliderPrototype.slidePrev=function(){this.slideTo.apply(this,[this.slideIndex-1].concat(_A(arguments)))};iSliderPrototype.regPlugin=function(){var args=_A(arguments);var name=args.shift(),plugin=args[0];if(!this._plugins.hasOwnProperty(name)&&typeof plugin!=="function"){return}if(typeof plugin==="function"){this._plugins[name]=plugin;args.shift()}if(!inArray(name,this._opts.plugins)){this._opts.plugins.push(args.length?[].concat([name],args):name);typeof this._plugins[name]==="function"&&this._plugins[name].apply(this,args)}};iSliderPrototype.bind=iSliderPrototype.delegate=function(evtType,selector,callback){function delegatedEventCallbackHandle(e){var evt=global.event?global.event:e;var target=evt.target;var eleArr=document.querySelectorAll(selector);for(var i=0;i<eleArr.length;i++){if(target===eleArr[i]){callback.call(target);break}}}this.wrap.addEventListener(evtType,delegatedEventCallbackHandle,false);var key=evtType+";"+selector;if(!this._EventHandle.hasOwnProperty(key)){this._EventHandle[key]=[[callback],[delegatedEventCallbackHandle]]}else{this._EventHandle[key][0].push(callback);this._EventHandle[key][1].push(delegatedEventCallbackHandle)}};iSliderPrototype.unbind=iSliderPrototype.unDelegate=function(evtType,selector,callback){var key=evtType+";"+selector;if(this._EventHandle.hasOwnProperty(key)){var i=this._EventHandle[key][0].indexOf(callback);if(i>-1){this.wrap.removeEventListener(evtType,this._EventHandle[key][1][i]);this._EventHandle[key][0][i]=this._EventHandle[key][1][i]=null;return true}}return false};iSliderPrototype.destroy=function(){var outer=this.outer;var device=this.deviceEvents;this.fire("destroy");if(this.isTouchable){outer.removeEventListener(device.startEvt,this);outer.removeEventListener(device.moveEvt,this);outer.removeEventListener(device.endEvt,this);!device.hasTouch&&outer.removeEventListener("mouseout",this)}global.removeEventListener(device.resizeEvt,this);
global.removeEventListener("focus",this);global.removeEventListener("blur",this);var n;for(n in this._EventHandle){var handList=this._EventHandle[n][1];for(var i=0;i<handList.length;i++){if(typeof handList[i]==="function"){this.wrap.removeEventListener(n.substr(0,n.indexOf(";")),handList[i])}}}this._EventHandle=null;for(n in this._LSN){this._LSN.hasOwnProperty(n)&&this._LSN[n]&&global.clearTimeout(this._LSN[n])}this._LSN=null;this.wrap.innerHTML=""};iSliderPrototype.on=function(eventName,func,force){if(inArray(eventName,iSlider.EVENTS)&&typeof func==="function"){!(eventName in this.events)&&(this.events[eventName]=[]);if(!force){this.events[eventName].push(func)}else{this.events[eventName].unshift(func)}}};iSliderPrototype.has=function(eventName,func){if(eventName in this.events){return -1<this.events[eventName].indexOf(func)}return false};iSliderPrototype.off=function(eventName,func){if(eventName in this.events){var index=this.events[eventName].indexOf(func);if(index>-1){delete this.events[eventName][index]}}};iSliderPrototype.fire=function(eventNames){var args=_A(arguments,1);eventNames.split(/\x20+/).forEach(function(eventName){this.log("[EVENT FIRE]:",eventName,args);if(eventName in this.events){var funcs=this.events[eventName];for(var i=0;i<funcs.length;i++){typeof funcs[i]==="function"&&funcs[i].apply&&funcs[i].apply(this,args)}}}.bind(this))};iSliderPrototype.reset=function(){this.pause();this._unWatchTransitionEnd();this.width=typeof this._opts.width==="number"?this._opts.width:this.wrap.offsetWidth;this.height=typeof this._opts.height==="number"?this._opts.height:this.wrap.offsetHeight;this.ratio=this.height/this.width;this.scale=this.isVertical?this.height:this.width;this._renderWrapper();this._autoPlay();this.fire("reset slideRestored",this.slideIndex,this.currentEl,this)};iSliderPrototype.loadData=function(data,initIndex){this.pause();this._unWatchTransitionEnd();this.slideIndex=initIndex||0;this.data=data;this._renderWrapper();this._autoPlay();this.fire("loadData slideChanged",this.slideIndex,this.currentEl,this)
};iSliderPrototype.pushData=function(sceneData){var len=this.data.length;this.data=this.data.concat(sceneData);if(this.isLooping&&this.slideIndex===0){this._renderItem(this.els[0],this.data.length-1)}else{if(len-1===this.slideIndex){this._renderItem(this.els[2],len);this._autoPlay()}}};iSliderPrototype._autoPlay=function(){this.delay>0?global.setTimeout(this.play.bind(this),this.delay):this.play()};iSliderPrototype.play=function(){this.pause();if(this.isAutoplay&&(this.isLooping||this.slideIndex<this.data.length-1)){this._LSN.autoPlay=global.setTimeout(this.slideNext.bind(this),this.duration)}};iSliderPrototype.pause=function(){this._LSN.autoPlay&&global.clearTimeout(this._LSN.autoPlay)};iSliderPrototype.hold=function(){this._holding=true};iSliderPrototype.unhold=function(){this._holding=false;this.unlock()};iSliderPrototype.lock=function(){this.hold();this._locking=true};iSliderPrototype.unlock=function(){this._locking=false};iSliderPrototype.seamScale=function(el){var regex=/scale([XY]?)\(([^\)]+)\)/;var transformStyle=iSlider.getStyle(el,"transform");if(regex.test(transformStyle)){iSlider.setStyle(el,"transform",transformStyle.replace(regex,function(res,axis,scale){var sc={};if(axis){sc[axis]=parseFloat(scale);return"scale"+this.axis+"("+(axis===this.axis?1.001*sc[this.axis]:1.001)+")"}else{if(scale.indexOf(",")>-1){scale=scale.split(",");sc.X=parseFloat(scale[0]);sc.Y=parseFloat(scale[1])}else{sc.Y=sc.X=parseFloat(scale)}sc[this.axis]*=1.001;return"scale("+sc.X+", "+sc.Y+")"}}.bind(this)))}else{iSlider.setStyle(el,"transform",transformStyle+" scale"+this.axis+"(1.001)")}};iSliderPrototype.originScale=function(el){var regex=/([\x20]?scale)([XY]?)\(([^\)]+)\)/;iSlider.setStyle(el,"transform",iSlider.getStyle(el,"transform").replace(regex,function(sc,res,axis,scale){sc={};if(axis){if(scale==="1.001"){return""}else{sc[axis]=parseFloat(scale);return"scale"+this.axis+"("+(axis===this.axis?sc[this.axis]/1.001:1)+")"}}else{if(scale.indexOf(",")>-1){scale=scale.split(",");
sc.X=parseFloat(scale[0]);sc.Y=parseFloat(scale[1])}else{sc.Y=sc.X=parseFloat(scale)}sc[this.axis]/=1.001;return"scale("+sc.X+", "+sc.Y+")"}}.bind(this)))};iSliderPrototype._isItself=function(target){var rule=this.fixPage;if(typeof rule==="string"){var path=[],parent=target,selector;while(!hasClass(parent,"islider-outer")&&parent!==this.wrap){path.push(parent);parent=parent.parentNode}parent=path.pop();if(path.length){try{selector=Array.prototype.slice.call(parent.querySelectorAll(rule));if(selector.length){for(var i=0;i<path.length;i++){if(selector.indexOf(path[i])>-1){return true}}}}catch(e){return false}}}return false};iSliderPrototype.subjectTo=function(target,how){if(!target instanceof iSlider){return}var self=this;self.animateTime=target.animateTime;self.isLooping=target.isLooping;self.isAutoplay=false;target.on("slideStart",function(evt){self.startHandler(evt)});target.on("slide",function(evt){self.moveHandler(evt)});target.on("slideEnd",function(evt){self.endHandler(evt)});target.on("slideChange",function(i){var l=self.data.length;var d=self.direction;if(d>0&&(i-self.slideIndex+l)%l===1){self.slideNext()}else{if(d<0&&(i-self.slideIndex-l)%l===-1){self.slidePrev()}}});target.on("slideRestore",function(i){if(self.slideIndex!==i){self.slideTo(i)}})};if(typeof require==="function"&&typeof module==="object"&&module&&typeof exports==="object"&&exports){module.exports=iSlider}else{if(typeof define==="function"&&define["amd"]){define(function(){return iSlider})}else{global["iSlider"]=global["iSlider"]||iSlider}}})(this||window);
(function(global,factory){if(typeof require==="function"&&typeof module==="object"&&module&&typeof exports==="object"&&exports){factory(require("iSlider"))}else{if(typeof define==="function"&&define["amd"]){define(["iSlider"],function(iSlider){factory(iSlider)})}else{factory(global["iSlider"])}}})(window?window:this,function(iSlider){iSlider&&iSlider.extend(iSlider._animateFuncs,{rotate:(function(){function rotate(dom,axis,scale,i,offset,direct){var rotateDirect=(axis==="X")?"Y":"X";if(this.isVertical){offset=-offset;if(Math.abs(direct)>1){direct=-direct}}iSlider.setStyle(this.wrap,"perspective",scale*4);dom.style.visibility="visible";if(direct>0&&i===2){dom.style.visibility="hidden"}if(direct<0&&i===0){dom.style.visibility="hidden"}dom.style.zIndex=i===1?1:0;dom.style.cssText+=iSlider.styleProp("backface-visibility")+":hidden;"+iSlider.styleProp("transform-style")+":preserve-3d;"+"position:absolute;";iSlider.setStyle(dom,"transform","rotate"+rotateDirect+"("+90*(offset/scale+i-1)+"deg) translateZ("+(0.889*scale/2)+"px) scale(0.889)")}rotate.effect=iSlider.styleProp("transform");rotate.reverse=true;return rotate})(),flip:(function(){function flip(dom,axis,scale,i,offset,direct){if(this.isVertical){offset=-offset}iSlider.setStyle(this.wrap,"perspective",scale*4);dom.style.visibility="visible";if(direct>0&&i===2){dom.style.visibility="hidden"}if(direct<0&&i===0){dom.style.visibility="hidden"}dom.style.cssText+="position:absolute;"+iSlider.styleProp("backface-visibility")+":hidden";iSlider.setStyle(dom,"transform","translateZ("+(scale/2)+"px) rotate"+((axis==="X")?"Y":"X")+"("+180*(offset/scale+i-1)+"deg) scale(0.875)")}flip.effect=iSlider.styleProp("transform");flip.reverse=true;return flip})(),depth:(function(){function depth(dom,axis,scale,i,offset,direct){var zoomScale=(4-Math.abs(i-1))*0.18;iSlider.setStyle(this.wrap,"perspective",scale*4);dom.style.zIndex=i===1?1:0;iSlider.setStyle(dom,"transform","scale("+zoomScale+") translateZ(0) translate"+axis+"("+(offset+1.3*scale*(i-1))+"px)")
}depth.effect=iSlider.styleProp("transform");return depth})(),flow:(function(){function flow(dom,axis,scale,i,offset,direct){var absoluteOffset=Math.abs(offset);var rotateDirect=(axis==="X")?"Y":"X";var directAmend=(axis==="X")?1:-1;var offsetRatio=Math.abs(offset/scale);iSlider.setStyle(this.wrap,"perspective",scale*4);if(i===1){dom.style.zIndex=scale-absoluteOffset}else{dom.style.zIndex=(offset>0)?(1-i)*absoluteOffset:(i-1)*absoluteOffset}iSlider.setStyle(dom,"transform","scale(0.7, 0.7) translateZ("+(offsetRatio*150-150)*Math.abs(i-1)+"px)"+"translate"+axis+"("+(offset+scale*(i-1))+"px)"+"rotate"+rotateDirect+"("+directAmend*(30-offsetRatio*30)*(1-i)+"deg)")}flow.effect=iSlider.styleProp("transform");return flow})(),card:(function(){function card(dom,axis,scale,i,offset,direct){var absoluteOffset=Math.abs(offset);var zoomScale=1;var z=1;if(absoluteOffset>0){if(i===1){zoomScale=1-0.2*Math.abs(i-1)-Math.abs(0.2*offset/scale).toFixed(6);z=0}}else{if(i!==1){if((direct>0&&i===0)||(direct<0&&i===2)){zoomScale=1-0.2*Math.abs(i-1)}z=0}}dom.style.zIndex=z;iSlider.setStyle(dom,"transform","scale("+zoomScale+") translateZ(0) translate"+axis+"("+((1+Math.abs(i-1)*0.2)*offset+scale*(i-1))+"px)")}card.effect=iSlider.styleProp("transform");return card})(),fade:(function(){function fade(dom,axis,scale,i,offset,direct){dom.style.zIndex=i===1?1:0;offset=Math.abs(offset);if(i===1){dom.style.opacity=1-(offset/scale)}else{dom.style.opacity=offset/scale}}fade.effect="opacity";return fade})(),zoomout:(function(){var lsn;function zoomout(dom,axis,scale,i,offset){var z,o,s;var oa=offset/scale;switch(i){case 0:lsn&&window.clearTimeout(lsn);o=oa<1?oa:1;s=2-(0.5*oa);z=2;var at=parseInt(window.getComputedStyle(dom)[iSlider.styleProp("transitionDuration",1)])*1000;if(at>0){lsn=window.setTimeout(function(){dom.style.zIndex=0},at)}break;case 1:o=1-oa;s=1-(0.5*oa);z=1;break;case 2:o=oa>0?oa:0;s=0.5-(0.5*oa);z=0;break}dom.style.cssText+="z-index:"+z+";opacity:"+o+";"+iSlider.styleProp("transform")+":scale("+s+");"
}zoomout.reverse=true;return zoomout})()})});
